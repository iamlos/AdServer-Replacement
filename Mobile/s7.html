<script>
    var ttDataEndpoint = "https://www.swisscom.ch";

    var ttAddsPerLanguage = {
        de: {
            stage: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
            stageTarget: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
        },
        fr: {
            stage: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
            stageTarget: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
        },
        it: {
            stage: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
            stageTarget: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
        },
        en: {
            stage: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
            stageTarget: "//swisscom.scene7.com/is/image/Swisscom/Upsell?$hide-stoerer-bubble=1&$price-value=1&$hide-layout1-content=0&$hide-layout1-header=0&$hide-layout3-header=1&$hide-layout3-content=1&?fmt=png&scl=1",
        }
    };

    /* Do not change below this line */
    mboxDefine('ele', 'AD_Stage_Click');

    function ttGetLanguageFromUrl(defaultLanguage) {
        var language = defaultLanguage ? defaultLanguage : "de";
        switch (true) {
            case /\/fr\//.test(window.location.href):
                language = "fr";
                break;
            case /\/it\//.test(window.location.href):
                language = "it";
                break;
            case /\/en\//.test(window.location.href):
                language = "en";
                break;
        }
        return language;
    }

    var ttLang = ttGetLanguageFromUrl();

    var ttAdds = ttAddsPerLanguage[ttLang];

    var ttObserver = new MutationObserver(function() { ttChangeStage(); });

    var ttObserverConfig = { childList: true };

    function ttChangeStage() {
        if ($(".ttStage").length == 0) {
            $(".stageMobile").parent().prepend('<div class="ttStage stage"></div>');
        }
        $(".ttStage").insertAfter("div[role='banner']");
        $(".ttStage").html(ttAdds.stage);
        var targetNode = $(".ttStage")[0];
        ttObserver.observe(targetNode, ttObserverConfig);
        $(".ttStage").on("remove", function () {
            $(".ttStage").remove();
            if ($(".ttStage").length == 0) $(".stageMobile").parent().prepend("<div class='ttStage stage'></div>");
            ttChangeStage();
        });
        $('#scs-stage a').click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            mboxUpdate('AD_Stage_Click');
            var $self = $(this);
            setTimeout(function() { window.location.href = $self.attr('href'); }, 500);
        });
    }

    var ttAddsLoaded = false;
    var ttDocumentReady = false;

    function ttStart() {
        if (ttAddsLoaded && ttDocumentReady) {
            ttChangeStage();
        }
    }

    var ttAddsCounter = ttAdds.teasers.length + 1; // teasers and stage

    ttAdds.stage = '<div class="stage" style="width: 100%"><div id="#scs-stage" style="width: 100%"><a href=' + ttAdds.stageTarget + '><img style="width: 100%" src=' + ttAdds.stage + '></img></a></div></div>';
    ttAddsCounter--;
    if (ttAddsCounter <= 0) { ttAddsLoaded = true; ttStart(); }

    $(document).ready(function() { ttDocumentReady = true; ttStart(); });
</script>